<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Trends</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            color: #333;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }
    
        .container {
            width: 80%;
            margin: auto;
            padding: 20px;
        }
    
        header {
            background-color: #00204a;
            color: white;
            padding: 15px 0; /* Increased padding for better spacing */
            text-align: center;
            font-size: 1.5em; /* Responsive font size */
        }
    
        nav ul {
            list-style: none;
            padding: 0;
        }
    
        nav ul li {
            display: inline;
            margin: 0 15px; /* Increased margin for better spacing */
        }
    
        nav ul li a {
            color: white;
            text-decoration: none;
        }
    
        nav ul li a:hover {
            text-decoration: underline;
        }
    
        main {
            padding: 20px 0;
        }
    
        .plot-container {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            padding: 20px; /* Added padding to ensure space for legend */
            display: flex;
            flex-direction: column;
        }
    
        .plot-content {
            width: calc(100% - 40px); /* Adjust width to fit within padding */
            height: 600px; /* Set a fixed height for better visibility */
            margin: auto;
        }
    
        .plot-description {
            padding: 15px; /* Increased padding for better readability */
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            box-sizing: border-box;
            margin-top: 10px;
            text-align: justify;
        }
    
        footer {
            background-color: #00204a;
            color: white;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
    

</head>

<body>
    <div class="container">
        <header>
            <h1>Market Trends Analysis</h1>
        </header>

        <main>
            <section>
                <h2>Selected Sector: {{ sector }}</h2>
                <h2>Selected Company: {{ company }}</h2>

                <!-- Volatility Graph -->
                <div class="plot-container">
                    <div class="plot-description">
                        <h3>1. Volatility</h3>
                        <p>This graph shows the volatility of the stock price over time. Volatility measures the rate at which the price of a stock increases or decreases for a given set of returns. High volatility indicates a high degree of risk because the stock price may change dramatically over a short period in either direction. This graph helps investors understand the stability of the stock and make informed decisions based on the risk involved.</p>
                    </div>
                    <div class="plot-content">
                        {{ market_trends_plot_volatility|safe }}
                    </div>
                </div>

                <!-- Price and Moving Averages Graph -->
                <div class="plot-container">
                    <div class="plot-description">
                        <h3>2. Price & Moving Averages</h3>
                        <p>This graph displays the actual stock price (in red) along with its moving average (in green). The moving average is a line that shows the average value of the stock price over a specific period (e.g., 30 days). It helps smooth out price fluctuations to identify trends in the stock price, making it easier to spot upward or downward movements. Investors use this to determine the overall trend and to confirm entry and exit points.</p>
                    </div>
                    <div class="plot-content">
                        {{ market_trends_plot_price_ma|safe }}
                    </div>
                </div>

                <!-- EMA Graph -->
                <div class="plot-container">
                    <div class="plot-description">
                        <h3>3. Exponential Moving Average (EMA)</h3>
                        <p>The Exponential Moving Average (EMA) is similar to a moving average but places more weight on recent prices, making it more sensitive to new information. This characteristic makes it a valuable tool for identifying trends quickly. A rising EMA suggests an upward trend, while a falling EMA indicates a downward trend. Investors use EMA to identify buying and selling signals and adjust their strategies based on short-term price movements.</p>
                    </div>
                    <div class="plot-content">
                        {{ market_trends_plot_ema|safe }}
                    </div>
                </div>

                <!-- Bollinger Bands Graph -->
                <div class="plot-container">
                    <div class="plot-description">
                        <h3>4. Bollinger Bands</h3>
                        <p>Bollinger Bands consist of three lines: a simple moving average (middle band) and two standard deviation lines (upper and lower bands). These bands expand and contract based on market volatility. When the price is near the upper band, the stock may be overbought (potentially overvalued), indicating a selling opportunity. Conversely, if the price is near the lower band, it may be oversold (potentially undervalued), indicating a buying opportunity. Bollinger Bands help traders understand price movements and predict future price fluctuations.</p>
                    </div>
                    <div class="plot-content">
                        {{ market_trends_plot_bollinger|safe }}
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2024 Investment Risk Analysis. All rights reserved.</p>
        </footer>
    </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</body>

</html>
